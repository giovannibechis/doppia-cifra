<div class="container">
  <!-- Header -->
  <div class="header">
    <div class="header-title">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="10"/>
        <circle cx="12" cy="12" r="6"/>
        <circle cx="12" cy="12" r="2"/>
      </svg>
      <h1>Doppia cifra</h1>
    </div>
    <p>Cerca un calciatore e scopri le sue statistiche sui goal anno per anno</p>
  </div>

  <!-- Search Section -->
  <div class="search-section">
    <div class="search-form">
      <div class="search-input-container">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="11" cy="11" r="8"/>
          <path d="m21 21-4.35-4.35"/>
        </svg>
        <input
          type="text"
          class="search-input"
          placeholder="Inserisci il nome del calciatore (es. Gabriel Batistuta)"
          [(ngModel)]="searchTerm"
          (keypress)="handleKeyPress($event)"
        />
      </div>
      <button
        class="search-button"
        (click)="searchPlayer()"
        [disabled]="loading() || !searchTerm.trim()"
      >

          <span  *ngIf="loading()" class="loading"></span>
        {{ loading() ? 'Ricerca...' : 'Cerca' }}
      </button>
    </div>
  </div>

  <!-- Error Message -->
  <div class="error-message" *ngIf="error()">
    <p>{{ error() }}</p>
  </div>

  <!-- Results -->
  <div *ngIf="playerData()">
    <!-- Player Info -->
    <div class="player-info">
      <div class="player-info-content">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
          <circle cx="12" cy="7" r="4"/>
        </svg>
        <div class="player-details">
          <h2>{{ playerData()?.name }}</h2>
          <p>{{ playerData()?.description }}</p>
          <div class="total-goals">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/>
              <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/>
              <path d="M4 22h16"/>
              <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/>
              <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/>
              <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/>
            </svg>
            Totale goal in carriera: {{ totalGoals() }}
          </div>
        </div>
      </div>
    </div>

    <!-- Career Stats -->
    <div class="stats-section">
      <h3 class="stats-header">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
          <line x1="16" y1="2" x2="16" y2="6"/>
          <line x1="8" y1="2" x2="8" y2="6"/>
          <line x1="3" y1="10" x2="21" y2="10"/>
        </svg>
        Statistiche per stagione
      </h3>

      <div class="stats-table-container">
        <table class="stats-table">
          <thead>
          <tr>
            <th>Stagione</th>
            <th>Squadra</th>
            <th>Goal</th>
            <th>Competizione</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let stat of playerData()?.careerStats">
            <td>{{ stat.season }}</td>
            <td>{{ stat.team }}</td>
            <td>
              <span class="goal-badge">{{ stat.goals }}</span>
            </td>
            <td>{{ stat.competition }}</td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div class="footer">
    <p>Dati forniti da Wikipedia Italia</p>
  </div>
</div>
